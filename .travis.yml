# Travis CI configuration file.

language: php

php:
    - 5.6
    - 7.0
# faster builds on new travis setup not using sudo
sudo: false

# cache vendor dirs
cache:
  directories:
    - $HOME/.composer/cache
    - vendor

install:
  - travis_retry composer self-update
  - travis_retry composer global require "fxp/composer-asset-plugin:^1.3.1"
  - travis_retry composer global require "codeception/codeception:2.2.*"
#  - export PATH="$HOME/.composer/vendor/bin:$PATH"
# export PATH="$PATH:~/.config/composer/vendor/bin"
  - travis_retry composer install --prefer-dist --no-interaction

before_script:
    # Start up a web server.
    # php -S 127.0.0.1:8888 -t /path/to/web/root >/dev/null 2>&1 &
    # Start up the webdriver.
    #  phantomjs --webdriver=4444 >/dev/null 2>&1 &
    # Install Codeception.
    # Doing this last gives the webdriver and server time to start up.
    - composer install --prefer-source
    - pwd

script:
    - ~/.composer/vendor/bin/codecept run
    # vendor/bin/codecept -c vendor/pceuropa/yii2-forms run unit
